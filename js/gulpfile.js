var gulp=require("gulp"),webserver=require("gulp-webserver"),minihtml=require("gulp-htmlmin"),miniimg=require("gulp-imagemin"),minicss=require("gulp-minify-css"),minijs=require("gulp-uglify");gulp.task("minicss",function(){gulp.src("./css/*.css").pipe(minicss()).pipe(gulp.dest("css"))}),gulp.task("minijs",function(){gulp.src("*.js").pipe(minijs()).pipe(gulp.dest("./js"))}),gulp.task("minihtml",function(){gulp.src("./index.html").pipe(minihtml({removeComments:!0,collapseWhitespace:!0,removeStyleLinTypeAttributes:!0,minifyJs:!0,minifyCss:!0})).pipe(gulp.dest("./html"))}),gulp.task("miniimgpng",function(){gulp.src("./images/*.png").pipe(miniimg({optimizationLevel:1,progressive:!0,interlaced:!0,multipass:!0})).pipe(gulp.dest("./img"))}),gulp.task("miniimgjpg",function(){gulp.src("./images/*.jpg").pipe(miniimg({optimizationLevel:1,progressive:!0,interlaced:!0,multipass:!0})).pipe(gulp.dest("./img"))}),gulp.task("miniimggif",function(){gulp.src("./images/*.gif").pipe(miniimg({optimizationLevel:1,progressive:!0,interlaced:!0,multipass:!0})).pipe(gulp.dest("./img"))}),gulp.task("server",function(){gulp.src(".").pipe(webserver({port:"8888",host:"localhost",livereload:!0,fallback:"index.html",open:!0}))}),gulp.task("webserver",function(){gulp.src("./").pipe(webserver({port:"8080",host:"localhost",middleware:function(i,e,s){e.writeHead(200,{"content-type":"text/json","Access-Control-Allow-Origin":"*"}),"/getdata"===i.url&&e.end(require("fs").readFileSync("data.json"))}}))}),gulp.task("default",["server","webserver","minicss","minijs","miniimgpng","miniimggif","miniimgjpg","minihtml"]);